<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PagedGeometry: /home/thomas/meteor-falls/meteor-falls-src/libs/ogre-paged/include/GrassLoader.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">PagedGeometry
   &#160;<span id="projectnumber">1.1.4</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/thomas/meteor-falls/meteor-falls-src/libs/ogre-paged/include/GrassLoader.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*-------------------------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment">Copyright (c) 2006 John Judnich</span>
<a name="l00003"></a>00003 <span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment">This software is provided &#39;as-is&#39;, without any express or implied warranty. In no event will the authors be held liable for any damages arising from the use of this software.</span>
<a name="l00005"></a>00005 <span class="comment">Permission is granted to anyone to use this software for any purpose, including commercial applications, and to alter it and redistribute it freely, subject to the following restrictions:</span>
<a name="l00006"></a>00006 <span class="comment">    1. The origin of this software must not be misrepresented; you must not claim that you wrote the original software. If you use this software in a product, an acknowledgment in the product documentation would be appreciated but is not required.</span>
<a name="l00007"></a>00007 <span class="comment">    2. Altered source versions must be plainly marked as such, and must not be misrepresented as being the original software.</span>
<a name="l00008"></a>00008 <span class="comment">    3. This notice may not be removed or altered from any source distribution.</span>
<a name="l00009"></a>00009 <span class="comment">-------------------------------------------------------------------------------------*/</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#ifndef __GrassLoader_H__</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="preprocessor">#define __GrassLoader_H__</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;PagedGeometry.h&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;PropertyMaps.h&quot;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;RandomTable.h&quot;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;OgrePrerequisites.h&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;OgreMaterial.h&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;OgrePixelFormat.h&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;OgreStringConverter.h&quot;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">namespace </span>Forests {
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="keyword">class </span>GrassLayer;
<a name="l00027"></a>00027 
<a name="l00049"></a><a class="code" href="classForests_1_1GrassLoader.html">00049</a> <span class="keyword">class </span><a class="code" href="classForests_1_1GrassLoader.html" title="A PageLoader-derived object you can use with PagedGeometry to produce realistic grass.">GrassLoader</a>: <span class="keyword">public</span> PageLoader
<a name="l00050"></a>00050 {
<a name="l00051"></a>00051 <span class="keyword">public</span>:
<a name="l00054"></a>00054     <a class="code" href="classForests_1_1GrassLoader.html#a6094d6e10a909d78199bf410c41f9f84" title="Creates a new GrassLoader object.">GrassLoader</a>(PagedGeometry *geom);
<a name="l00055"></a>00055     ~<a class="code" href="classForests_1_1GrassLoader.html" title="A PageLoader-derived object you can use with PagedGeometry to produce realistic grass.">GrassLoader</a>();
<a name="l00056"></a>00056 
<a name="l00070"></a>00070     <a class="code" href="classForests_1_1GrassLayer.html" title="A data structure giving you full control over grass properties.">GrassLayer</a> *<a class="code" href="classForests_1_1GrassLoader.html#ac597670da603c118b89612189808b544" title="Adds a grass layer to the scene.">addLayer</a>(<span class="keyword">const</span> Ogre::String &amp;material);
<a name="l00071"></a>00071 
<a name="l00075"></a>00075     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLoader.html#a2ab1601328480cbce193761d21cf4b7a" title="Removes and deletes a grass layer from the scene.">deleteLayer</a>(<a class="code" href="classForests_1_1GrassLayer.html" title="A data structure giving you full control over grass properties.">GrassLayer</a> *layer);
<a name="l00076"></a>00076 
<a name="l00081"></a><a class="code" href="classForests_1_1GrassLoader.html#a5428c9f5ec43a5b38d069e781da5a1d7">00081</a>     <span class="keyword">inline</span> std::list&lt;GrassLayer*&gt; &amp;<a class="code" href="classForests_1_1GrassLoader.html#a5428c9f5ec43a5b38d069e781da5a1d7" title="Returns a list of added grass layers.">getLayerList</a>() { <span class="keywordflow">return</span> layerList; }
<a name="l00082"></a>00082 
<a name="l00094"></a><a class="code" href="classForests_1_1GrassLoader.html#a287830d6997923405207abaf5b1f3022">00094</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLoader.html#a287830d6997923405207abaf5b1f3022" title="Sets the global wind direction for this GrassLoader.">setWindDirection</a>(Ogre::Vector3 &amp;dir) { windDir = dir; }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <span class="keyword">inline</span> <span class="keywordtype">void</span> setBuildEdgesEnabled(<span class="keywordtype">bool</span> value) { autoEdgeBuildEnabled=value; }
<a name="l00097"></a>00097     <span class="keyword">inline</span> <span class="keywordtype">bool</span> getBuildEdgesEnabled() { <span class="keywordflow">return</span> autoEdgeBuildEnabled; }
<a name="l00098"></a>00098 
<a name="l00102"></a><a class="code" href="classForests_1_1GrassLoader.html#ad9b47891c789e2f20ec85e85c53545b6">00102</a>     <span class="keyword">inline</span> Ogre::Vector3 &amp;<a class="code" href="classForests_1_1GrassLoader.html#ad9b47891c789e2f20ec85e85c53545b6" title="Returns the global wind direction for this GrassLoader.">getWindDirection</a>() { <span class="keywordflow">return</span> windDir; }
<a name="l00103"></a>00103 
<a name="l00116"></a><a class="code" href="classForests_1_1GrassLoader.html#a5b82b25a812839583e9f6fcfe2a271f9">00116</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLoader.html#a5b82b25a812839583e9f6fcfe2a271f9" title="Sets the global density factor for this GrassLoader.">setDensityFactor</a>(<span class="keywordtype">float</span> density) { densityFactor = density; }
<a name="l00117"></a>00117 
<a name="l00121"></a><a class="code" href="classForests_1_1GrassLoader.html#af07116f943e80490cc5d4d9b71cc08ff">00121</a>     <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="classForests_1_1GrassLoader.html#af07116f943e80490cc5d4d9b71cc08ff" title="Returns the global density factor for this GrassLoader.">getDensityFactor</a>() { <span class="keywordflow">return</span> densityFactor; }
<a name="l00122"></a>00122 
<a name="l00138"></a><a class="code" href="classForests_1_1GrassLoader.html#a556f122460f1cf43e995b4c582385881">00138</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLoader.html#a556f122460f1cf43e995b4c582385881" title="Sets the render queue group the grass will be rendered through.">setRenderQueueGroup</a>(Ogre::uint8 queueID) { renderQueue = queueID; }
<a name="l00139"></a>00139 
<a name="l00171"></a><a class="code" href="classForests_1_1GrassLoader.html#ab1043375cac4273cc57abed8d70a508c">00171</a>     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLoader.html#ab1043375cac4273cc57abed8d70a508c" title="Sets the height function used to calculate grass Y coordinates.">setHeightFunction</a>(Ogre::Real (*heightFunction)(Ogre::Real x, Ogre::Real z, <span class="keywordtype">void</span> *userData), <span class="keywordtype">void</span> *userData = NULL) {
<a name="l00172"></a>00172         this-&gt;heightFunction = heightFunction;
<a name="l00173"></a>00173         heightFunctionUserData = userData;
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175 
<a name="l00177"></a>00177     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLoader.html#aac52d82b9f1151512d5eca2c41d93810" title="INTERNAL FUNCTION - DO NOT USE.">loadPage</a>(PageInfo &amp;page);
<a name="l00179"></a>00179     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLoader.html#aa2c23aad329883d0e6b8c3f0985259ac" title="INTERNAL FUNCTION - DO NOT USE.">unloadPage</a>(PageInfo &amp;page);
<a name="l00181"></a>00181     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLoader.html#a64c7c3a6d46e252addb4b91f5065c3e9" title="INTERNAL FUNCTION - DO NOT USE.">frameUpdate</a>();
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="keyword">static</span> <span class="keywordtype">float</span> getRangeRandom(<span class="keywordtype">float</span> start, <span class="keywordtype">float</span> end);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 <span class="keyword">private</span>:
<a name="l00187"></a>00187     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classForests_1_1GrassLayer.html" title="A data structure giving you full control over grass properties.">GrassLayer</a>;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189     <span class="comment">//Helper functions</span>
<a name="l00190"></a>00190     Ogre::Mesh *generateGrass_QUAD(PageInfo &amp;page, <a class="code" href="classForests_1_1GrassLayer.html" title="A data structure giving you full control over grass properties.">GrassLayer</a> *layer, <span class="keyword">const</span> <span class="keywordtype">float</span> *grassPositions, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> grassCount);
<a name="l00191"></a>00191     Ogre::Mesh *generateGrass_CROSSQUADS(PageInfo &amp;page, <a class="code" href="classForests_1_1GrassLayer.html" title="A data structure giving you full control over grass properties.">GrassLayer</a> *layer, <span class="keyword">const</span> <span class="keywordtype">float</span> *grassPositions, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> grassCount);
<a name="l00192"></a>00192     Ogre::Mesh *generateGrass_SPRITE(PageInfo &amp;page, <a class="code" href="classForests_1_1GrassLayer.html" title="A data structure giving you full control over grass properties.">GrassLayer</a> *layer, <span class="keyword">const</span> <span class="keywordtype">float</span> *grassPositions, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> grassCount);
<a name="l00193"></a>00193 
<a name="l00194"></a>00194     <span class="comment">//List of grass types</span>
<a name="l00195"></a>00195     std::list&lt;GrassLayer*&gt; layerList;
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="comment">//Height data</span>
<a name="l00198"></a>00198     Ogre::Real (*heightFunction)(Ogre::Real x, Ogre::Real z, <span class="keywordtype">void</span> *userData);   <span class="comment">//Pointer to height function</span>
<a name="l00199"></a>00199     <span class="keywordtype">void</span> *heightFunctionUserData;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     <span class="comment">//Misc.</span>
<a name="l00202"></a>00202     PagedGeometry *geom;
<a name="l00203"></a>00203     Ogre::uint8 renderQueue;
<a name="l00204"></a>00204     <span class="keywordtype">float</span> densityFactor;
<a name="l00205"></a>00205 
<a name="l00206"></a>00206     <span class="comment">// random table</span>
<a name="l00207"></a>00207     <a class="code" href="classRandomTable.html">RandomTable</a> *rTable;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209     <span class="comment">//Animation</span>
<a name="l00210"></a>00210     Ogre::Timer windTimer;
<a name="l00211"></a>00211     Ogre::Vector3 windDir;
<a name="l00212"></a>00212     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lastTime;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214     <span class="keywordtype">bool</span> autoEdgeBuildEnabled;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> GUID;
<a name="l00217"></a>00217     <span class="keyword">static</span> <span class="keyword">inline</span> Ogre::String getUniqueID()
<a name="l00218"></a>00218     {
<a name="l00219"></a>00219         <span class="keywordflow">return</span> <span class="stringliteral">&quot;GrassLDR&quot;</span> + Ogre::StringConverter::toString(++GUID);
<a name="l00220"></a>00220     }
<a name="l00221"></a>00221 };
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 
<a name="l00225"></a>00225 <span class="keyword">enum</span> GrassTechnique
<a name="l00226"></a>00226 {
<a name="l00228"></a>00228     GRASSTECH_QUAD,
<a name="l00230"></a>00230     GRASSTECH_CROSSQUADS,
<a name="l00232"></a>00232     GRASSTECH_SPRITE
<a name="l00233"></a>00233 };
<a name="l00234"></a>00234 
<a name="l00236"></a>00236 <span class="keyword">enum</span> FadeTechnique
<a name="l00237"></a>00237 {
<a name="l00239"></a>00239     FADETECH_ALPHA,
<a name="l00241"></a>00241     FADETECH_GROW,
<a name="l00243"></a>00243     FADETECH_ALPHAGROW
<a name="l00244"></a>00244 };
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 
<a name="l00258"></a><a class="code" href="classForests_1_1GrassLayer.html">00258</a> <span class="keyword">class </span><a class="code" href="classForests_1_1GrassLayer.html" title="A data structure giving you full control over grass properties.">GrassLayer</a>
<a name="l00259"></a>00259 {
<a name="l00260"></a>00260 <span class="keyword">public</span>:
<a name="l00262"></a>00262     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#af5874bd9e2dff8c3d61b3f0a00d30313" title="Sets the material that is applied to all grass billboards/quads.">setMaterialName</a>(<span class="keyword">const</span> Ogre::String &amp;matName);
<a name="l00263"></a>00263 
<a name="l00265"></a>00265     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a9d40ed12c446e8b72db53beff840c395" title="Sets the minimum size that grass quads/billboards will be.">setMinimumSize</a>(<span class="keywordtype">float</span> width, <span class="keywordtype">float</span> height);
<a name="l00266"></a>00266 
<a name="l00268"></a>00268     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a3a1efca6fb0077704b438b6a1e95dda2" title="Sets the maximum size that grass quads/billboards will be.">setMaximumSize</a>(<span class="keywordtype">float</span> width, <span class="keywordtype">float</span> height);
<a name="l00269"></a>00269 
<a name="l00271"></a><a class="code" href="classForests_1_1GrassLayer.html#aa86acf7f9e726745751d9b4497d45459">00271</a>     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#aa86acf7f9e726745751d9b4497d45459" title="Sets the maximum density (measured in grass quads/billboards per square unit) of grass.">setDensity</a>(<span class="keywordtype">float</span> density) { this-&gt;density = density; }
<a name="l00272"></a>00272 
<a name="l00288"></a><a class="code" href="classForests_1_1GrassLayer.html#ad533f918710476ea340f17c6d65acc2a">00288</a>     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#ad533f918710476ea340f17c6d65acc2a" title="Sets a minimum / maximum height where grass may appear.">setHeightRange</a>(<span class="keywordtype">float</span> minHeight, <span class="keywordtype">float</span> maxHeight = 0) { minY = minHeight; maxY = maxHeight; }
<a name="l00289"></a>00289 
<a name="l00299"></a><a class="code" href="classForests_1_1GrassLayer.html#a33e20cd72532270e272b948179f2537e">00299</a>     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a33e20cd72532270e272b948179f2537e" title="Set the maximum slope a grass of blade can be placed on.">setMaxSlope</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> maxSlopeRatio) { maxSlope = maxSlopeRatio; }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a33e20cd72532270e272b948179f2537e" title="Set the maximum slope a grass of blade can be placed on.">setMaxSlope</a>(Ogre::Radian maxSlopeAngle) {
<a name="l00302"></a>00302         <span class="keywordflow">if</span> (maxSlopeAngle &gt; Ogre::Degree(89.99f))
<a name="l00303"></a>00303             maxSlopeAngle = Ogre::Degree(89.99f);
<a name="l00304"></a>00304         <span class="keywordflow">if</span> (maxSlopeAngle &lt; Ogre::Degree(0))
<a name="l00305"></a>00305             maxSlopeAngle = Ogre::Degree(0);
<a name="l00306"></a>00306 
<a name="l00307"></a>00307         maxSlope = Ogre::Math::Tan(maxSlopeAngle);
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309 
<a name="l00316"></a><a class="code" href="classForests_1_1GrassLayer.html#a8ad50fde768daeb4d12b4581789b8c3f">00316</a>     Ogre::Real <a class="code" href="classForests_1_1GrassLayer.html#a8ad50fde768daeb4d12b4581789b8c3f" title="Get the maximum slope a grass blade can be placed on (as set by setMaxSlope()).">getMaxSlope</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> maxSlope; }
<a name="l00317"></a>00317 
<a name="l00337"></a>00337     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#ae1ee749f533dd8e5345029a4daca7399" title="Sets the density map used for this grass layer.">setDensityMap</a>(<span class="keyword">const</span> Ogre::String &amp;mapFile, MapChannel channel = CHANNEL_COLOR);
<a name="l00338"></a>00338 
<a name="l00346"></a>00346     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#ae1ee749f533dd8e5345029a4daca7399" title="Sets the density map used for this grass layer.">setDensityMap</a>(Ogre::TexturePtr map, MapChannel channel = CHANNEL_COLOR);
<a name="l00347"></a>00347 
<a name="l00358"></a>00358     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a6750afae5a6cd9da5e86b4c610a41156" title="Sets the filtering mode used for density maps.">setDensityMapFilter</a>(MapFilter filter);
<a name="l00359"></a>00359 
<a name="l00380"></a>00380     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a6ec6057ab7c5ba45f281816d9efbbd58" title="Sets the color map used for this grass layer.">setColorMap</a>(<span class="keyword">const</span> Ogre::String &amp;mapFile, MapChannel channel = CHANNEL_COLOR);
<a name="l00381"></a>00381 
<a name="l00389"></a>00389     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a6ec6057ab7c5ba45f281816d9efbbd58" title="Sets the color map used for this grass layer.">setColorMap</a>(Ogre::TexturePtr map, MapChannel channel = CHANNEL_COLOR);
<a name="l00390"></a>00390 
<a name="l00401"></a>00401     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a19fcec009407b94f52c8bfb1c4cf45bf" title="Sets the filtering mode used for color maps.">setColorMapFilter</a>(MapFilter filter);
<a name="l00402"></a>00402 
<a name="l00414"></a><a class="code" href="classForests_1_1GrassLayer.html#a957fbea4a52b984a8711b31e7c076313">00414</a>     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a957fbea4a52b984a8711b31e7c076313" title="Sets the boundaries of the density/color maps.">setMapBounds</a>(<span class="keyword">const</span> TBounds &amp;bounds)
<a name="l00415"></a>00415     {
<a name="l00416"></a>00416         mapBounds = bounds;
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418 
<a name="l00428"></a><a class="code" href="classForests_1_1GrassLayer.html#a66fb21a83131c8579fefdebcc4e715fb">00428</a>     <a class="code" href="classForests_1_1DensityMap.html" title="A 2D greyscale image that is assigned to a certain region of your world to represent density levels...">DensityMap</a>* <a class="code" href="classForests_1_1GrassLayer.html#a66fb21a83131c8579fefdebcc4e715fb" title="Gets a pointer to the density map being used.">getDensityMap</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> densityMap; }
<a name="l00429"></a>00429 
<a name="l00439"></a><a class="code" href="classForests_1_1GrassLayer.html#a1c3b121260da1a2d76be118354795839">00439</a>     <a class="code" href="classForests_1_1ColorMap.html" title="A 2D greyscale image that is assigned to a certain region of your world to represent color levels...">ColorMap</a>* <a class="code" href="classForests_1_1GrassLayer.html#a1c3b121260da1a2d76be118354795839" title="Gets a pointer to the color map being used.">getColorMap</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> colorMap; }
<a name="l00440"></a>00440 
<a name="l00456"></a>00456     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a8a6ab3124a1511046e80c6bdc19fe1ef" title="Sets the technique used to render this grass layer.">setRenderTechnique</a>(GrassTechnique style, <span class="keywordtype">bool</span> blendBase = <span class="keyword">false</span>);
<a name="l00457"></a>00457 
<a name="l00466"></a>00466     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#aa91db4519adeabdb2a62b48e7ed172f9" title="Sets the technique used when fading out distant grass.">setFadeTechnique</a>(FadeTechnique style);
<a name="l00467"></a>00467 
<a name="l00474"></a>00474     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#ad6df813cc5e8c09818a6a47eac90dc77" title="Enables/disables animation on this layer.">setAnimationEnabled</a>(<span class="keywordtype">bool</span> enabled);
<a name="l00475"></a>00475 
<a name="l00476"></a>00476 
<a name="l00479"></a>00479     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a8316b063379ba0dcd6c29a335d6fdbc0" title="Enables/disables lighting on this layer.">setLightingEnabled</a>(<span class="keywordtype">bool</span> enabled);
<a name="l00480"></a>00480 
<a name="l00485"></a><a class="code" href="classForests_1_1GrassLayer.html#afa2970c0e014c7639d03c256d2ad2e11">00485</a>     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#afa2970c0e014c7639d03c256d2ad2e11" title="Sets how far grass should sway back and forth.">setSwayLength</a>(Ogre::Real mag) { animMag = mag; }
<a name="l00486"></a>00486 
<a name="l00488"></a><a class="code" href="classForests_1_1GrassLayer.html#a8d615d59c925dada0ae72eaa4270cf99">00488</a>     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a8d615d59c925dada0ae72eaa4270cf99" title="Sets the sway speed of the grass (measured in &quot;sways-per-second&quot;)">setSwaySpeed</a>(Ogre::Real speed) { animSpeed = speed; }
<a name="l00489"></a>00489 
<a name="l00498"></a><a class="code" href="classForests_1_1GrassLayer.html#a79364300d59f228b1c01b7115bd4276d">00498</a>     <span class="keywordtype">void</span> <a class="code" href="classForests_1_1GrassLayer.html#a79364300d59f228b1c01b7115bd4276d" title="Sets the smooth distribution (positional phase shift) of the grass swaying animation.">setSwayDistribution</a>(Ogre::Real freq) { animFreq = freq; }
<a name="l00499"></a>00499 
<a name="l00500"></a>00500 <span class="keyword">private</span>:
<a name="l00501"></a>00501     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classForests_1_1GrassLoader.html" title="A PageLoader-derived object you can use with PagedGeometry to produce realistic grass.">GrassLoader</a>;
<a name="l00502"></a>00502 
<a name="l00504"></a>00504     <a class="code" href="classForests_1_1GrassLayer.html" title="A data structure giving you full control over grass properties.">GrassLayer</a>(PagedGeometry *geom, <a class="code" href="classForests_1_1GrassLoader.html" title="A PageLoader-derived object you can use with PagedGeometry to produce realistic grass.">GrassLoader</a> *ldr);
<a name="l00505"></a>00505 
<a name="l00507"></a>00507     ~<a class="code" href="classForests_1_1GrassLayer.html" title="A data structure giving you full control over grass properties.">GrassLayer</a>();
<a name="l00508"></a>00508 
<a name="l00509"></a>00509     <span class="comment">//Updates the vertex shader used by this layer based on the animate enable status</span>
<a name="l00510"></a>00510     <span class="keywordtype">void</span> _updateShaders();
<a name="l00511"></a>00511 
<a name="l00512"></a>00512     <span class="comment">//Used by GrassLoader::loadPage() - populates an array with a uniform distribution of grass</span>
<a name="l00513"></a>00513     <span class="comment">//Returns the final number of grasses, which will always be &lt;= grassCount</span>
<a name="l00514"></a>00514     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _populateGrassList_Uniform(PageInfo page, <span class="keywordtype">float</span> *posBuff, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> grassCount);
<a name="l00515"></a>00515 
<a name="l00516"></a>00516     <span class="comment">//Used by GrassLoader::loadPage() - populates an array of grass positions based on the density map</span>
<a name="l00517"></a>00517     <span class="comment">//Returns the final number of grasses, which will always be &lt;= grassCount</span>
<a name="l00518"></a>00518     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _populateGrassList_UnfilteredDM(PageInfo page, <span class="keywordtype">float</span> *posBuff, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> grassCount);
<a name="l00519"></a>00519 
<a name="l00520"></a>00520     <span class="comment">//Variation of _populateGrassList(), using bilinear filtering on the density map lookups</span>
<a name="l00521"></a>00521     <span class="comment">//Returns the final number of grasses, which will always be &lt;= grassCount</span>
<a name="l00522"></a>00522     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _populateGrassList_BilinearDM(PageInfo page, <span class="keywordtype">float</span> *posBuff, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> grassCount);
<a name="l00523"></a>00523 
<a name="l00524"></a>00524 
<a name="l00525"></a>00525     <a class="code" href="classForests_1_1GrassLoader.html" title="A PageLoader-derived object you can use with PagedGeometry to produce realistic grass.">GrassLoader</a> *parent;
<a name="l00526"></a>00526 
<a name="l00527"></a>00527     <span class="comment">//Grass material/shape properties</span>
<a name="l00528"></a>00528     Ogre::MaterialPtr material;
<a name="l00529"></a>00529    Ogre::Real density;
<a name="l00530"></a>00530     Ogre::Real minWidth, maxWidth;
<a name="l00531"></a>00531     Ogre::Real minHeight, maxHeight;
<a name="l00532"></a>00532 
<a name="l00533"></a>00533     Ogre::Real minY, maxY;
<a name="l00534"></a>00534    Ogre::Real maxSlope;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536     FadeTechnique fadeTechnique;
<a name="l00537"></a>00537     GrassTechnique renderTechnique;
<a name="l00538"></a>00538 
<a name="l00539"></a>00539     <span class="comment">//Property maps</span>
<a name="l00540"></a>00540     TBounds mapBounds;
<a name="l00541"></a>00541 
<a name="l00542"></a>00542     <a class="code" href="classForests_1_1DensityMap.html" title="A 2D greyscale image that is assigned to a certain region of your world to represent density levels...">DensityMap</a> *densityMap;
<a name="l00543"></a>00543     MapFilter densityMapFilter;
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     <a class="code" href="classForests_1_1ColorMap.html" title="A 2D greyscale image that is assigned to a certain region of your world to represent color levels...">ColorMap</a> *colorMap;
<a name="l00546"></a>00546     MapFilter colorMapFilter;
<a name="l00547"></a>00547 
<a name="l00548"></a>00548     <span class="comment">//Grass shader properties</span>
<a name="l00549"></a>00549     <span class="keywordtype">bool</span> animate, blend, lighting, shaderNeedsUpdate;
<a name="l00550"></a>00550     Ogre::Real animMag, animSpeed, animFreq;
<a name="l00551"></a>00551 
<a name="l00552"></a>00552     <span class="comment">//Current frame of animation for this layer</span>
<a name="l00553"></a>00553     Ogre::Real waveCount;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555     PagedGeometry *geom;
<a name="l00556"></a>00556 };
<a name="l00557"></a>00557 
<a name="l00558"></a>00558 
<a name="l00566"></a><a class="code" href="classForests_1_1GrassPage.html">00566</a> <span class="keyword">class </span><a class="code" href="classForests_1_1GrassPage.html" title="A custom page type designed specifically for use with GrassLoader.">GrassPage</a>: <span class="keyword">public</span> GeometryPage
<a name="l00567"></a>00567 {
<a name="l00568"></a>00568 <span class="keyword">public</span>:
<a name="l00569"></a>00569     <span class="keywordtype">void</span> init(PagedGeometry *geom, <span class="keyword">const</span> Ogre::Any &amp;data);
<a name="l00570"></a>00570     ~<a class="code" href="classForests_1_1GrassPage.html" title="A custom page type designed specifically for use with GrassLoader.">GrassPage</a>();
<a name="l00571"></a>00571 
<a name="l00572"></a>00572     <span class="keywordtype">void</span> addEntity(Ogre::Entity *ent, <span class="keyword">const</span> Ogre::Vector3 &amp;position, <span class="keyword">const</span> Ogre::Quaternion &amp;rotation, <span class="keyword">const</span> Ogre::Vector3 &amp;scale, <span class="keyword">const</span> Ogre::ColourValue &amp;color);
<a name="l00573"></a>00573     <span class="keywordtype">void</span> removeEntities();
<a name="l00574"></a>00574     <span class="keywordtype">void</span> setFade(<span class="keywordtype">bool</span> enabled, Ogre::Real visibleDist, Ogre::Real invisibleDist) {}
<a name="l00575"></a>00575     <span class="keywordtype">void</span> setVisible(<span class="keywordtype">bool</span> visible);
<a name="l00576"></a>00576 
<a name="l00577"></a>00577 <span class="keyword">private</span>:
<a name="l00578"></a>00578     Ogre::SceneManager *sceneMgr;
<a name="l00579"></a>00579     Ogre::SceneNode *rootNode;
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     std::list&lt;Ogre::SceneNode*&gt; nodeList;
<a name="l00582"></a>00582 
<a name="l00583"></a>00583     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> GUID;
<a name="l00584"></a>00584     <span class="keyword">static</span> <span class="keyword">inline</span> Ogre::String getUniqueID()
<a name="l00585"></a>00585     {
<a name="l00586"></a>00586         <span class="keywordflow">return</span> <span class="stringliteral">&quot;GrassPage&quot;</span> + Ogre::StringConverter::toString(++GUID);
<a name="l00587"></a>00587     }
<a name="l00588"></a>00588 };
<a name="l00589"></a>00589 
<a name="l00590"></a>00590 
<a name="l00591"></a>00591 }
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 19 2013 09:55:43 for PagedGeometry by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
